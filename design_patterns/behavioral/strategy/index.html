<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategy Pattern</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #3b82f6; /* Vibrant blue */
            --primary-dark: #2563eb;
            --primary-light: #60a5fa;
            --secondary-color: #10b981; /* Green */
            --secondary-dark: #059669;
            --accent-color: #8b5cf6; /* Purple */
            --accent-color-good: #059669; /* Green for good examples */
            --accent-color-bad: #ef4444; /* Red for bad examples */
            --text-color: #e2e8f0;
            --text-muted: #94a3b8;
            --bg-color: #0f172a; /* Dark blue background */
            --bg-light: #1e293b;
            --bg-lighter: #334155;
            --bg-card: #1e293b;
            --border-color: #334155;
            --code-bg: #0f172a;
            --code-text: #e2e8f0;
            --heading-font: 'Poppins', sans-serif;
            --body-font: 'Inter', sans-serif;
            --border-radius: 8px;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
            --glow: 0 0 15px rgba(59, 130, 246, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--body-font);
            line-height: 1.7;
            color: var(--text-color);
            background-color: var(--bg-color);
        }

        /* Hero Section */
        .hero {
            position: relative;
            min-height: 40vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            overflow: hidden;
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 100%);
            padding: 3rem 1rem;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 1500"><rect fill="%23000000" width="2000" height="1500"/><defs><circle stroke="%23222" vector-effect="non-scaling-stroke" id="a" fill="none" stroke-width="5" r="315"/></defs><g transform="translate(1000 750)"><use stroke="%233b82f6" href="%23a" transform="rotate(60 0 0) scale(0.4 0.4)"/><use stroke="%233b82f6" href="%23a" transform="rotate(120 0 0) scale(0.5 0.5)"/><use stroke="%233b82f6" href="%23a" transform="rotate(180 0 0) scale(0.6 0.6)"/><use stroke="%233b82f6" href="%23a" transform="rotate(240 0 0) scale(0.7 0.7)"/><use stroke="%233b82f6" href="%23a" transform="rotate(300 0 0) scale(0.8 0.8)"/></g></svg>');
            background-size: cover;
            opacity: 0.1;
            animation: pulse 15s ease-in-out infinite alternate;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.1; }
            50% { transform: scale(1.05); opacity: 0.15; }
            100% { transform: scale(1); opacity: 0.1; }
        }

        .hero-content {
            position: relative;
            z-index: 10;
            max-width: 800px;
        }

        .hero h1 {
            font-family: var(--heading-font);
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
        }

        .hero p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Shapes animation */
        .shapes {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
        }

        .shape {
            position: absolute;
            opacity: 0.2;
            animation: float 15s infinite linear;
        }

        .shape-1 {
            top: 20%;
            left: 10%;
            width: 60px;
            height: 60px;
            border-radius: 41% 59% 37% 63% / 44% 67% 33% 56%;
            background-color: #10b981;
            animation-duration: 25s;
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.4);
        }

        .shape-2 {
            top: 60%;
            right: 15%;
            width: 80px;
            height: 80px;
            border-radius: 73% 27% 59% 41% / 57% 43% 57% 43%;
            background-color: #8b5cf6;
            animation-duration: 30s;
            animation-delay: 2s;
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.4);
        }

        @keyframes float {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(10px, 15px) rotate(90deg);
            }
            50% {
                transform: translate(5px, -10px) rotate(180deg);
            }
            75% {
                transform: translate(-10px, 5px) rotate(270deg);
            }
            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }

        /* Main Content */
        .main-content {
            position: relative;
            margin-top: -50px;
            padding-bottom: 4rem;
        }

        .container {
            width: 90%;
            max-width: 1000px;
            margin: 0 auto;
            padding: 3rem;
            background-color: var(--bg-light);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
        }

        /* Back link */
        .back-link {
            display: inline-flex;
            align-items: center;
            margin-bottom: 2rem;
            color: var(--primary-light);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }
        
        .back-link:hover {
            color: var(--primary-color);
            text-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
        }

        .back-link svg {
            margin-right: 0.5rem;
        }

        /* Typography */
        h1, h2, h3 {
            font-family: var(--heading-font);
            color: var(--text-color);
        }

        h1.page-title {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 2rem;
            position: relative;
            padding-bottom: 1rem;
        }

        h1.page-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }

        h2 {
            font-size: 1.8rem;
            font-weight: 600;
            margin-top: 3rem;
            margin-bottom: 1.5rem;
            color: var(--primary-light);
        }

        h3 {
            font-size: 1.4rem;
            font-weight: 500;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        p, li {
            margin-bottom: 1.5rem;
            color: var(--text-muted);
            font-size: 1.05rem;
            line-height: 1.8;
        }

        ul, ol {
            padding-left: 1.5rem;
            margin-bottom: 2rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        strong {
            color: var(--text-color);
            font-weight: 600;
        }

        /* Code styling */
        code {
            background-color: var(--code-bg);
            padding: 0.2em 0.4em;
            border-radius: 4px;
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
            color: #f87171;
            border: 1px solid var(--border-color);
        }

        pre {
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            overflow-x: auto;
            margin: 2rem 0;
            font-size: 0.9rem;
            line-height: 1.6;
            border: 1px solid var(--border-color);
        }

        pre code {
            background: none;
            padding: 0;
            color: inherit;
            font-size: inherit;
            border: none;
        }

        /* Examples */
        .example {
            border: 1px solid var(--border-color);
            padding: 2rem;
            margin: 2.5rem 0;
            border-radius: var(--border-radius);
            background-color: var(--bg-light);
            box-shadow: var(--shadow-sm);
        }

        .visualization {
            display: flex;
            justify-content: center;
            margin: 2rem 0;
            overflow-x: auto;
            padding: 1rem;
        }

        .visualization svg {
            max-width: 100%;
        }
        
        /* Footer */
        footer {
            background-color: var(--bg-color);
            color: white;
            padding: 3rem 0;
            text-align: center;
            margin-top: 4rem;
            border-top: 1px solid var(--border-color);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .footer-content p {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 0;
        }

        /* Interactive Demo */
        .interactive-demo {
            background-color: var(--bg-lighter);
            padding: 2rem;
            margin: 3rem 0;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .interactive-demo h3 {
            margin-top: 0;
            color: var(--primary-light);
        }

        /* Form elements */
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            font-family: var(--body-font);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s, box-shadow 0.2s;
        }

        button:hover {
            background-color: var(--primary-dark);
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.5);
        }

        button:active {
            transform: scale(0.98);
        }

        .output {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            min-height: 60px;
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
            white-space: pre-wrap;
            margin-top: 1.5rem;
            color: var(--text-color);
        }

        /* Strategy demo specific styles */
        #strategy-demo {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .cart-section, .strategy-section {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
        }

        .cart-section h4, .strategy-section h4 {
            margin-top: 0;
            margin-bottom: 1rem;
            color: var(--primary-light);
        }

        .cart-items {
            margin-bottom: 1.5rem;
            min-height: 50px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            background-color: var(--bg-light);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
        }

        .cart-item-name {
            font-weight: 500;
        }

        .cart-item-price {
            color: var(--primary-light);
        }

        .cart-item-remove {
            background: none;
            border: none;
            color: var(--accent-color-bad);
            cursor: pointer;
            padding: 0;
            margin: 0 0 0 1rem;
            font-size: 1.1rem;
            transition: transform 0.2s;
        }

        .cart-item-remove:hover {
            transform: scale(1.2);
            background: none;
            box-shadow: none;
        }

        .item-controls {
            margin-bottom: 1.5rem;
        }

        .item-select {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        select {
            background-color: var(--bg-light);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 0.75rem;
            color: var(--text-color);
            font-family: var(--body-font);
            font-size: 1rem;
            min-width: 200px;
        }

        select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
        }

        .cart-total {
            padding: 1rem;
            background-color: var(--bg-light);
            border-radius: var(--border-radius);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.1rem;
        }

        .strategy-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .strategy-option {
            padding: 1rem;
            background-color: var(--bg-light);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
        }

        .strategy-option.active {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 1px var(--primary-color);
        }

        .strategy-option label {
            display: inline-flex;
            align-items: center;
            margin-bottom: 1rem;
            font-weight: 600;
            cursor: pointer;
        }

        .strategy-option input[type="radio"] {
            margin-right: 0.5rem;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .strategy-details {
            margin-top: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .strategy-details input,
        .strategy-details select {
            width: 100%;
            padding: 0.75rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--body-font);
            font-size: 1rem;
        }

        .inline-fields {
            display: flex;
            gap: 0.5rem;
        }

        .inline-fields input {
            flex: 1;
        }

        #checkout-button {
            width: 100%;
            margin-top: 1rem;
            padding: 1rem;
            font-size: 1.1rem;
        }

        #checkout-button:disabled {
            background-color: var(--bg-lighter);
            color: var(--text-muted);
            cursor: not-allowed;
            box-shadow: none;
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <section class="hero">
        <div class="shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
        </div>
        <div class="hero-content">
            <h1>Strategy Pattern</h1>
            <p>Define a family of algorithms, encapsulate each one, and make them interchangeable</p>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container">
        <section class="content-section">
            <h2>Understanding the Strategy Pattern</h2>
            <p>The Strategy pattern is a behavioral design pattern that enables selecting an algorithm at runtime. It defines a family of algorithms, encapsulates each one, and makes them interchangeable. The pattern allows the algorithm to vary independently from clients that use it.</p>
            
            <h3>Problem</h3>
            <p>Imagine you're developing an application that needs to implement various algorithms for different operations, such as data validation, sorting, or payment processing. As your application grows, you end up with multiple conditional statements throughout your code to determine which algorithm to use based on context.</p>
            <p>This approach makes your code hard to maintain, violates the open/closed principle, and makes it difficult to add new algorithms without modifying existing code.</p>
            
            <h3>Solution</h3>
            <p>The Strategy pattern suggests defining a family of algorithms, putting each one into a separate class, and making their objects interchangeable. Each algorithm becomes a "strategy" that can be selected at runtime.</p>
            <p>This approach isolates algorithm implementation from the code that uses it, enabling you to vary the algorithm independently of the context and add new algorithms without modifying existing code.</p>
            
            <h3>Structure</h3>
            <div class="diagram">
                <img src="../../images/strategy-pattern.svg" alt="Strategy Pattern Structure" class="diagram-img">
                        </div>
            <ul class="diagram-description">
                <li><strong>Strategy</strong>: Declares an interface common to all supported algorithms.</li>
                <li><strong>Concrete Strategies</strong>: Implement different variations of an algorithm.</li>
                <li><strong>Context</strong>: Maintains a reference to a Strategy object and defines an interface to let the strategy access its data.</li>
                <li><strong>Client</strong>: Creates a specific strategy object and passes it to the context.</li>
            </ul>
            
            <h3>When to Use</h3>
            <p>Use the Strategy Pattern when:</p>
            <ul>
                <li>You need to use different variants of an algorithm within an object and be able to switch them at runtime.</li>
                <li>You have multiple classes that differ only in their behavior.</li>
                <li>You want to isolate the implementation details of an algorithm from the code that uses it.</li>
                <li>You need to hide complex, algorithm-specific data structures from clients.</li>
            </ul>
            
            <h3>Benefits</h3>
            <ul>
                <li>Algorithms can be switched at runtime.</li>
                <li>Isolation of implementation details from the code that uses them.</li>
                <li>Replacement of inheritance with composition.</li>
                <li>Open/Closed Principle: You can add new strategies without modifying the context.</li>
                </ul>
            
            <h3>Real-World Uses</h3>
            <ul>
                <li><strong>Sorting Algorithms</strong>: Using different sorting strategies based on data types or size.</li>
                <li><strong>Payment Processing</strong>: Supporting multiple payment methods (credit card, PayPal, cryptocurrency).</li>
                <li><strong>Compression Strategies</strong>: Applying different compression algorithms based on file types.</li>
                <li><strong>Authentication Mechanisms</strong>: OAuth, JWT, basic authentication strategies.</li>
                <li><strong>Tax Calculation</strong>: Different strategies for various geographical regions.</li>
            </ul>
        </section>

        <section class="content-section">
            <h2>Implementation Example</h2>
            <p>Below is a JavaScript implementation of the Strategy pattern for handling different payment methods:</p>
            
            <pre><code class="language-javascript">// Strategy interface
class PaymentStrategy {
  pay(amount) {
    throw new Error("pay() method must be implemented");
    }
}

// Concrete strategies
class CreditCardStrategy extends PaymentStrategy {
  constructor(cardNumber, name, cvv, expirationDate) {
    super();
    this.cardNumber = cardNumber;
    this.name = name;
    this.cvv = cvv;
    this.expirationDate = expirationDate;
  }
  
  pay(amount) {
    console.log(`Paid $${amount} using Credit Card`);
    return true;
  }
}

class PayPalStrategy extends PaymentStrategy {
  constructor(email, password) {
    super();
    this.email = email;
    this.password = password;
  }
  
  pay(amount) {
    console.log(`Paid $${amount} using PayPal`);
    return true;
  }
}

class CryptoStrategy extends PaymentStrategy {
  constructor(walletAddress) {
    super();
    this.walletAddress = walletAddress;
  }
  
  pay(amount) {
    console.log(`Paid $${amount} using Cryptocurrency`);
    return true;
  }
}

// Context
class ShoppingCart {
  constructor() {
    this.items = [];
    this.paymentStrategy = null;
  }
  
  addItem(item) {
    this.items.push(item);
  }
  
  setPaymentStrategy(paymentStrategy) {
    this.paymentStrategy = paymentStrategy;
  }
  
  calculateTotal() {
    return this.items.reduce((total, item) => total + item.price, 0);
  }
  
  checkout() {
    if (!this.paymentStrategy) {
      throw new Error("No payment strategy set");
    }
    
    const amount = this.calculateTotal();
    return this.paymentStrategy.pay(amount);
  }
}

// Client code
const cart = new ShoppingCart();
cart.addItem({ name: "Product 1", price: 100 });
cart.addItem({ name: "Product 2", price: 50 });

// User chooses to pay with credit card
cart.setPaymentStrategy(new CreditCardStrategy(
  "1234 5678 9012 3456", "John Doe", "123", "12/25"
));
cart.checkout();

// User changes mind and wants to pay with PayPal
cart.setPaymentStrategy(new PayPalStrategy(
  "johndoe@example.com", "password123"
));</code></pre>
            
            <p>In this example, different payment methods are implemented as strategies. The shopping cart (context) uses a payment strategy to process payments without knowing the specific details of each payment method.</p>
        </section>

        <section class="content-section interactive-demo-section">
                <h2>Interactive Demo</h2>
            <p>Experience the Strategy pattern in action with this interactive payment processing demo. Add items to your cart, select different payment strategies, and see how the behavior changes while the interface remains consistent.</p>
            
            <div class="interactive-demo">
                <div id="strategy-demo">
                    <div class="cart-section">
                        <h4>Shopping Cart</h4>
                        <div id="cart-items" class="cart-items">
                            <!-- Cart items will be dynamically added here -->
            </div>
                        <div class="item-controls">
                            <div class="item-select">
                                <select id="item-select">
                                    <option value="laptop">Laptop ($1200)</option>
                                    <option value="phone">Smartphone ($800)</option>
                                    <option value="headphones">Headphones ($150)</option>
                                    <option value="tablet">Tablet ($350)</option>
                                    <option value="watch">Smartwatch ($250)</option>
                                </select>
                                <button id="add-item-button" class="button">Add to Cart</button>
                            </div>
                        </div>
                        <div class="cart-total-section">
                            <div class="cart-total">
                                <span>Total:</span>
                                <span id="cart-total">$0</span>
                    </div>
                </div>
            </div>
            
                    <div class="strategy-section">
                        <h4>Payment Method (Strategy)</h4>
                        <p>Select a payment method to use for checkout:</p>
                        
                        <div class="strategy-options">
                            <div class="strategy-option">
                                <label>
                                    <input type="radio" name="payment-strategy" id="credit-card" checked>
                                    Credit Card
                                </label>
                                <div id="credit-card-details" class="strategy-details">
                                    <input type="text" id="card-number" placeholder="Card Number" value="4111 1111 1111 1111">
                                    <input type="text" id="card-name" placeholder="Name on Card" value="John Doe">
                                    <div class="inline-fields">
                                        <input type="text" id="card-expiry" placeholder="MM/YY" value="12/25">
                                        <input type="text" id="card-cvv" placeholder="CVV" value="123">
                                    </div>
                                </div>
                </div>
                
                            <div class="strategy-option">
                                <label>
                                    <input type="radio" name="payment-strategy" id="paypal">
                                    PayPal
                                </label>
                                <div id="paypal-details" class="strategy-details" style="display: none;">
                                    <input type="email" id="paypal-email" placeholder="Email" value="john.doe@example.com">
                                    <input type="password" id="paypal-password" placeholder="Password" value="password123">
                                </div>
                </div>
                
                            <div class="strategy-option">
                                <label>
                                    <input type="radio" name="payment-strategy" id="crypto">
                                    Cryptocurrency
                                </label>
                                <div id="crypto-details" class="strategy-details" style="display: none;">
                                    <input type="text" id="wallet-address" placeholder="Wallet Address" value="0x1234567890abcdef1234567890abcdef12345678">
                                    <select id="crypto-type">
                                        <option value="bitcoin">Bitcoin</option>
                                        <option value="ethereum">Ethereum</option>
                                        <option value="litecoin">Litecoin</option>
                                    </select>
                </div>
            </div>
                        </div>
                        
                        <button id="checkout-button" class="button" disabled>Checkout</button>
                    </div>
                </div>
                
                <div class="output" id="strategy-output"></div>
    </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <p>&copy; 2025 Design Patterns Interactive Guide</p>
        </div>
    </footer>

    <script>
        // Strategy interface
        class PaymentStrategy {
            pay(amount) {
                throw new Error("pay() method must be implemented");
            }
        }

        // Concrete strategies
        class CreditCardStrategy extends PaymentStrategy {
            constructor(cardNumber, name, cvv, expirationDate) {
                super();
                this.cardNumber = cardNumber;
                this.name = name;
                this.cvv = cvv;
                this.expirationDate = expirationDate;
            }
            
            pay(amount) {
                // In a real system, this would process a credit card payment
                const last4 = this.cardNumber.replace(/\s/g, '').slice(-4);
                return `Payment of $${amount} processed with Credit Card (${last4})`;
            }
        }

        class PayPalStrategy extends PaymentStrategy {
            constructor(email, password) {
                super();
                this.email = email;
                this.password = password;
            }
            
            pay(amount) {
                // In a real system, this would process a PayPal payment
                return `Payment of $${amount} processed with PayPal (${this.email})`;
            }
        }

        class CryptocurrencyStrategy extends PaymentStrategy {
            constructor(walletAddress, cryptoType) {
                super();
                this.walletAddress = walletAddress;
                this.cryptoType = cryptoType;
            }
            
            pay(amount) {
                // In a real system, this would process a cryptocurrency payment
                const shortAddress = this.walletAddress.slice(0, 8) + '...' + this.walletAddress.slice(-6);
                return `Payment of $${amount} processed with ${this.cryptoType.toUpperCase()} (${shortAddress})`;
            }
        }

        // Context
        class ShoppingCart {
            constructor() {
                this.items = [];
                this.paymentStrategy = null;
            }
            
            addItem(item) {
                this.items.push(item);
            }
            
            removeItem(itemId) {
                this.items = this.items.filter(item => item.id !== itemId);
            }
            
            setPaymentStrategy(paymentStrategy) {
                this.paymentStrategy = paymentStrategy;
            }
            
            calculateTotal() {
                return this.items.reduce((total, item) => total + item.price, 0);
            }
            
            checkout() {
                if (!this.paymentStrategy) {
                    throw new Error("No payment strategy set");
                }
                
                if (this.items.length === 0) {
                    throw new Error("Cart is empty");
                }
                
                const amount = this.calculateTotal();
                return this.paymentStrategy.pay(amount);
            }
        }

        // UI interaction code
        document.addEventListener('DOMContentLoaded', function() {
            // DOM elements
            const cartItemsContainer = document.getElementById('cart-items');
            const itemSelect = document.getElementById('item-select');
            const addItemButton = document.getElementById('add-item-button');
            const cartTotal = document.getElementById('cart-total');
            const checkoutButton = document.getElementById('checkout-button');
            const outputElement = document.getElementById('strategy-output');
            
            // Strategy radio buttons
            const creditCardRadio = document.getElementById('credit-card');
            const paypalRadio = document.getElementById('paypal');
            const cryptoRadio = document.getElementById('crypto');
            
            // Strategy detail elements
            const creditCardDetails = document.getElementById('credit-card-details');
            const paypalDetails = document.getElementById('paypal-details');
            const cryptoDetails = document.getElementById('crypto-details');
            
            // Create shopping cart
            const cart = new ShoppingCart();
            
            // Item catalog
            const items = {
                'laptop': { id: 'laptop', name: 'Laptop', price: 1200 },
                'phone': { id: 'phone', name: 'Smartphone', price: 800 },
                'headphones': { id: 'headphones', name: 'Headphones', price: 150 },
                'tablet': { id: 'tablet', name: 'Tablet', price: 350 },
                'watch': { id: 'watch', name: 'Smartwatch', price: 250 }
            };
            
            // Log output
            function log(message) {
                const timestamp = new Date().toLocaleTimeString();
                outputElement.textContent += `[${timestamp}] ${message}\n`;
                outputElement.scrollTop = outputElement.scrollHeight;
            }
            
            // Update cart display
            function updateCartDisplay() {
                // Clear cart items container
                cartItemsContainer.innerHTML = '';
                
                // Create cart item elements
                if (cart.items.length === 0) {
                    const emptyMessage = document.createElement('p');
                    emptyMessage.textContent = 'Your cart is empty. Add some items!';
                    emptyMessage.style.color = 'var(--text-muted)';
                    cartItemsContainer.appendChild(emptyMessage);
                    } else {
                    cart.items.forEach(item => {
                        const cartItem = document.createElement('div');
                        cartItem.className = 'cart-item';
                        
                        const nameSpan = document.createElement('span');
                        nameSpan.className = 'cart-item-name';
                        nameSpan.textContent = item.name;
                        
                        const priceSpan = document.createElement('span');
                        priceSpan.className = 'cart-item-price';
                        priceSpan.textContent = `$${item.price}`;
                        
                        const removeButton = document.createElement('button');
                        removeButton.className = 'cart-item-remove';
                        removeButton.textContent = '×';
                        removeButton.addEventListener('click', () => {
                            cart.removeItem(item.id);
                            log(`Removed ${item.name} from cart`);
                            updateCartDisplay();
                        });
                        
                        const priceContainer = document.createElement('div');
                        priceContainer.className = 'cart-item-price-container';
                        priceContainer.appendChild(priceSpan);
                        priceContainer.appendChild(removeButton);
                        
                        cartItem.appendChild(nameSpan);
                        cartItem.appendChild(priceContainer);
                        
                        cartItemsContainer.appendChild(cartItem);
                    });
                }
                
                // Update total
                cartTotal.textContent = `$${cart.calculateTotal()}`;
                
                // Enable/disable checkout button
                checkoutButton.disabled = cart.items.length === 0;
            }
            
            // Add item to cart
            addItemButton.addEventListener('click', function() {
                const itemId = itemSelect.value;
                const item = items[itemId];
                
                if (item) {
                    cart.addItem(item);
                    log(`Added ${item.name} to cart ($${item.price})`);
                    updateCartDisplay();
                }
            });
            
            // Handle payment strategy selection
            creditCardRadio.addEventListener('change', function() {
                if (this.checked) {
                    creditCardDetails.style.display = 'block';
                    paypalDetails.style.display = 'none';
                    cryptoDetails.style.display = 'none';
                    
                    const creditCardStrategy = new CreditCardStrategy(
                        document.getElementById('card-number').value,
                        document.getElementById('card-name').value,
                        document.getElementById('card-cvv').value,
                        document.getElementById('card-expiry').value
                    );
                    
                    cart.setPaymentStrategy(creditCardStrategy);
                    log('Selected Credit Card payment strategy');
                }
            });
            
            paypalRadio.addEventListener('change', function() {
                if (this.checked) {
                    creditCardDetails.style.display = 'none';
                    paypalDetails.style.display = 'block';
                    cryptoDetails.style.display = 'none';
                    
                    const paypalStrategy = new PayPalStrategy(
                        document.getElementById('paypal-email').value,
                        document.getElementById('paypal-password').value
                    );
                    
                    cart.setPaymentStrategy(paypalStrategy);
                    log('Selected PayPal payment strategy');
                }
            });
            
            cryptoRadio.addEventListener('change', function() {
                if (this.checked) {
                    creditCardDetails.style.display = 'none';
                    paypalDetails.style.display = 'none';
                    cryptoDetails.style.display = 'block';
                    
                    const cryptoStrategy = new CryptocurrencyStrategy(
                        document.getElementById('wallet-address').value,
                        document.getElementById('crypto-type').value
                    );
                    
                    cart.setPaymentStrategy(cryptoStrategy);
                    log('Selected Cryptocurrency payment strategy');
                }
            });
            
            // Handle checkout
            checkoutButton.addEventListener('click', function() {
                try {
                    // Update strategy with latest values before checkout
                    if (creditCardRadio.checked) {
                        cart.setPaymentStrategy(new CreditCardStrategy(
                            document.getElementById('card-number').value,
                            document.getElementById('card-name').value,
                            document.getElementById('card-cvv').value,
                            document.getElementById('card-expiry').value
                        ));
                    } else if (paypalRadio.checked) {
                        cart.setPaymentStrategy(new PayPalStrategy(
                            document.getElementById('paypal-email').value,
                            document.getElementById('paypal-password').value
                        ));
                    } else if (cryptoRadio.checked) {
                        cart.setPaymentStrategy(new CryptocurrencyStrategy(
                            document.getElementById('wallet-address').value,
                            document.getElementById('crypto-type').value
                        ));
                    }
                    
                    const result = cart.checkout();
                    log(`Checkout successful: ${result}`);
                    
                    // Clear cart after successful checkout
                    cart.items = [];
                    updateCartDisplay();
                    
                    // Show success message
                    log('Thank you for your purchase!');
                } catch (error) {
                    log(`Checkout failed: ${error.message}`);
                }
            });
            
            // Initialize with Credit Card strategy
            const initialCreditCardStrategy = new CreditCardStrategy(
                document.getElementById('card-number').value,
                document.getElementById('card-name').value,
                document.getElementById('card-cvv').value,
                document.getElementById('card-expiry').value
            );
            
            cart.setPaymentStrategy(initialCreditCardStrategy);
            
            // Initialize cart display
            updateCartDisplay();
            
            // Initial log
            log('Strategy Pattern Demo initialized');
            log('Add items to your cart and select a payment strategy to checkout');
        });
    </script>
</body>
</html>
