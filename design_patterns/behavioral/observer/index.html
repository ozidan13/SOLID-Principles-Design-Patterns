<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Observer Pattern</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #3b82f6; /* Vibrant blue */
            --primary-dark: #2563eb;
            --primary-light: #60a5fa;
            --secondary-color: #10b981; /* Green */
            --secondary-dark: #059669;
            --accent-color: #8b5cf6; /* Purple */
            --accent-color-good: #059669; /* Green for good examples */
            --accent-color-bad: #ef4444; /* Red for bad examples */
            --text-color: #e2e8f0;
            --text-muted: #94a3b8;
            --bg-color: #0f172a; /* Dark blue background */
            --bg-light: #1e293b;
            --bg-lighter: #334155;
            --bg-card: #1e293b;
            --border-color: #334155;
            --code-bg: #0f172a;
            --code-text: #e2e8f0;
            --heading-font: 'Poppins', sans-serif;
            --body-font: 'Inter', sans-serif;
            --border-radius: 8px;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
            --glow: 0 0 15px rgba(59, 130, 246, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--body-font);
            line-height: 1.7;
            color: var(--text-color);
            background-color: var(--bg-color);
        }

        /* Hero Section */
        .hero {
            position: relative;
            min-height: 40vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            overflow: hidden;
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 100%);
            padding: 3rem 1rem;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 1500"><rect fill="%23000000" width="2000" height="1500"/><defs><circle stroke="%23222" vector-effect="non-scaling-stroke" id="a" fill="none" stroke-width="5" r="315"/></defs><g transform="translate(1000 750)"><use stroke="%233b82f6" href="%23a" transform="rotate(60 0 0) scale(0.4 0.4)"/><use stroke="%233b82f6" href="%23a" transform="rotate(120 0 0) scale(0.5 0.5)"/><use stroke="%233b82f6" href="%23a" transform="rotate(180 0 0) scale(0.6 0.6)"/><use stroke="%233b82f6" href="%23a" transform="rotate(240 0 0) scale(0.7 0.7)"/><use stroke="%233b82f6" href="%23a" transform="rotate(300 0 0) scale(0.8 0.8)"/></g></svg>');
            background-size: cover;
            opacity: 0.1;
            animation: pulse 15s ease-in-out infinite alternate;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.1; }
            50% { transform: scale(1.05); opacity: 0.15; }
            100% { transform: scale(1); opacity: 0.1; }
        }

        .hero-content {
            position: relative;
            z-index: 10;
            max-width: 800px;
        }

        .hero h1 {
            font-family: var(--heading-font);
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
        }

        .hero p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Shapes animation */
        .shapes {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
        }

        .shape {
            position: absolute;
            opacity: 0.2;
            animation: float 15s infinite linear;
        }

        .shape-1 {
            top: 20%;
            left: 10%;
            width: 60px;
            height: 60px;
            border-radius: 41% 59% 37% 63% / 44% 67% 33% 56%;
            background-color: #10b981;
            animation-duration: 25s;
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.4);
        }

        .shape-2 {
            top: 60%;
            right: 15%;
            width: 80px;
            height: 80px;
            border-radius: 73% 27% 59% 41% / 57% 43% 57% 43%;
            background-color: #8b5cf6;
            animation-duration: 30s;
            animation-delay: 2s;
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.4);
        }

        @keyframes float {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(10px, 15px) rotate(90deg);
            }
            50% {
                transform: translate(5px, -10px) rotate(180deg);
            }
            75% {
                transform: translate(-10px, 5px) rotate(270deg);
            }
            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }

        /* Main Content */
        .main-content {
            position: relative;
            margin-top: -50px;
            padding-bottom: 4rem;
        }

        .container {
            width: 90%;
            max-width: 1000px;
            margin: 0 auto;
            padding: 3rem;
            background-color: var(--bg-light);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
        }

        /* Back link */
        .back-link {
            display: inline-flex;
            align-items: center;
            margin-bottom: 2rem;
            color: var(--primary-light);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }
        
        .back-link:hover {
            color: var(--primary-color);
            text-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
        }

        .back-link svg {
            margin-right: 0.5rem;
        }

        /* Typography */
        h1, h2, h3 {
            font-family: var(--heading-font);
            color: var(--text-color);
        }

        h1.page-title {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 2rem;
            position: relative;
            padding-bottom: 1rem;
        }

        h1.page-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }

        h2 {
            font-size: 1.8rem;
            font-weight: 600;
            margin-top: 3rem;
            margin-bottom: 1.5rem;
            color: var(--primary-light);
        }

        h3 {
            font-size: 1.4rem;
            font-weight: 500;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        p, li {
            margin-bottom: 1.5rem;
            color: var(--text-muted);
            font-size: 1.05rem;
            line-height: 1.8;
        }

        ul, ol {
            padding-left: 1.5rem;
            margin-bottom: 2rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        strong {
            color: var(--text-color);
            font-weight: 600;
        }

        /* Code styling */
        code {
            background-color: var(--code-bg);
            padding: 0.2em 0.4em;
            border-radius: 4px;
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
            color: #f87171;
            border: 1px solid var(--border-color);
        }

        pre {
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            overflow-x: auto;
            margin: 2rem 0;
            font-size: 0.9rem;
            line-height: 1.6;
            border: 1px solid var(--border-color);
        }

        pre code {
            background: none;
            padding: 0;
            color: inherit;
            font-size: inherit;
            border: none;
        }

        /* Examples */
        .example {
            border: 1px solid var(--border-color);
            padding: 2rem;
            margin: 2.5rem 0;
            border-radius: var(--border-radius);
            background-color: var(--bg-light);
            box-shadow: var(--shadow-sm);
        }

        .visualization {
            display: flex;
            justify-content: center;
            margin: 2rem 0;
            overflow-x: auto;
            padding: 1rem;
        }

        .visualization svg {
            max-width: 100%;
        }
        
        /* Footer */
        footer {
            background-color: var(--bg-color);
            color: white;
            padding: 3rem 0;
            text-align: center;
            margin-top: 4rem;
            border-top: 1px solid var(--border-color);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .footer-content p {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 0;
        }

        /* Interactive Demo */
        .interactive-demo {
            background-color: var(--bg-lighter);
            padding: 2rem;
            margin: 3rem 0;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .interactive-demo h3 {
            margin-top: 0;
            color: var(--primary-light);
        }

        .weather-controls {
            background-color: var(--bg-card);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-color);
        }

        .control-group {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .control-group label {
            width: 150px;
            margin-right: 1rem;
        }

        .control-group input[type="range"] {
            flex: 1;
            margin-right: 1rem;
            accent-color: var(--primary-color);
        }

        .observers {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .observer-display {
            background-color: var(--bg-card);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
        }

        .display-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .display-header h5 {
            margin: 0;
            font-weight: 500;
        }

        .display-content {
            background-color: var(--bg-color);
            padding: 1rem;
            border-radius: var(--border-radius);
            min-height: 80px;
            border: 1px solid var(--border-color);
            font-family: var(--body-font);
            line-height: 1.6;
        }

        /* Toggle Switch */
        .toggle {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-color);
            transition: .4s;
            border-radius: 24px;
            border: 1px solid var(--border-color);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 3px;
            background-color: var(--text-muted);
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary-dark);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
            background-color: white;
        }

        /* Button */
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            font-family: var(--body-font);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s, box-shadow 0.2s;
            margin-top: 1rem;
        }

        button:hover {
            background-color: var(--primary-dark);
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.5);
        }

        button:active {
            transform: scale(0.98);
        }

        /* Output styles */
        .output {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            min-height: 100px;
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
            white-space: pre-wrap;
            margin-top: 1.5rem;
            color: var(--text-color);
            overflow: auto;
            max-height: 200px;
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <section class="hero">
        <div class="shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
        </div>
        <div class="hero-content">
            <h1>Observer Pattern</h1>
            <p>Define a one-to-many dependency between objects so that when one object changes state, all its dependents are notified and updated automatically</p>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container">
        <section class="content-section">
            <h2>Understanding the Observer Pattern</h2>
            <p>The Observer pattern is a behavioral design pattern that establishes a one-to-many relationship between objects. When one object (the subject) changes state, all its dependents (observers) are notified and updated automatically. This pattern is a cornerstone of event-driven programming.</p>
            
            <h3>Problem</h3>
            <p>Imagine you're developing an application where changes to one object require actions in other objects. For example, when a stock price changes, multiple displays need to update: a price chart, a list view, and a statistics panel. Without a proper pattern, you might end up with tight coupling between these components, making your code rigid and difficult to maintain.</p>
            <p>The challenge is to establish communication between these objects while keeping them loosely coupled. You want the price object to notify the displays of changes without knowing which displays are listening.</p>
            
            <h3>Solution</h3>
            <p>The Observer pattern suggests defining a one-to-many dependency between objects. The key objects in this pattern are the Subject (also called Observable) and Observer:</p>
            <ul>
                <li><strong>Subject:</strong> Maintains a list of observers and provides methods to add, remove, and notify observers.</li>
                <li><strong>Observer:</strong> Defines an interface for objects that should be notified of changes in a subject.</li>
            </ul>
            
            <p>When the subject's state changes, it notifies all observers. The observers can then query the subject to get the updated state and take appropriate actions.</p>
            
            <h3>Structure</h3>
            <div class="visualization">
                <svg width="800" height="400" viewBox="0 0 800 400">
                    <!-- Background -->
                    <rect x="0" y="0" width="800" height="400" fill="transparent" />
                    
                    <!-- Subject Interface -->
                    <rect x="100" y="40" width="200" height="60" rx="5" fill="#3b82f6" stroke="#fff" stroke-width="2" stroke-dasharray="5,5" />
                    <text x="200" y="75" font-family="sans-serif" font-size="16" text-anchor="middle" fill="white">Subject</text>
                    
                    <!-- Subject Methods -->
                    <rect x="100" y="100" width="200" height="80" rx="5" fill="#334155" />
                    <text x="200" y="125" font-family="sans-serif" font-size="14" text-anchor="middle" fill="white">attach(Observer)</text>
                    <text x="200" y="150" font-family="sans-serif" font-size="14" text-anchor="middle" fill="white">detach(Observer)</text>
                    <text x="200" y="175" font-family="sans-serif" font-size="14" text-anchor="middle" fill="white">notify()</text>
                    
                    <!-- Concrete Subject -->
                    <rect x="100" y="220" width="200" height="60" rx="5" fill="#10b981" />
                    <text x="200" y="255" font-family="sans-serif" font-size="16" text-anchor="middle" fill="white">ConcreteSubject</text>
                    
                    <!-- Concrete Subject Methods -->
                    <rect x="100" y="280" width="200" height="50" rx="5" fill="#334155" />
                    <text x="200" y="305" font-family="sans-serif" font-size="14" text-anchor="middle" fill="white">getState()</text>
                    <text x="200" y="330" font-family="sans-serif" font-size="14" text-anchor="middle" fill="white">setState()</text>
                    
                    <!-- Observer Interface -->
                    <rect x="500" y="40" width="200" height="60" rx="5" fill="#3b82f6" stroke="#fff" stroke-width="2" stroke-dasharray="5,5" />
                    <text x="600" y="75" font-family="sans-serif" font-size="16" text-anchor="middle" fill="white">Observer</text>
                    
                    <!-- Observer Methods -->
                    <rect x="500" y="100" width="200" height="30" rx="5" fill="#334155" />
                    <text x="600" y="120" font-family="sans-serif" font-size="14" text-anchor="middle" fill="white">update()</text>
                    
                    <!-- Concrete Observers -->
                    <rect x="400" y="220" width="180" height="60" rx="5" fill="#10b981" />
                    <text x="490" y="255" font-family="sans-serif" font-size="16" text-anchor="middle" fill="white">ConcreteObserverA</text>
                    
                    <rect x="600" y="220" width="180" height="60" rx="5" fill="#10b981" />
                    <text x="690" y="255" font-family="sans-serif" font-size="16" text-anchor="middle" fill="white">ConcreteObserverB</text>
                    
                    <!-- Observer Methods -->
                    <rect x="400" y="280" width="180" height="30" rx="5" fill="#334155" />
                    <text x="490" y="300" font-family="sans-serif" font-size="14" text-anchor="middle" fill="white">update()</text>
                    
                    <rect x="600" y="280" width="180" height="30" rx="5" fill="#334155" />
                    <text x="690" y="300" font-family="sans-serif" font-size="14" text-anchor="middle" fill="white">update()</text>
                    
                    <!-- Inheritance Lines -->
                    <path d="M200 180 L200 220" stroke="#ffffff" stroke-width="2" marker-end="url(#arrowhead)" />
                    <path d="M600 130 L490 220" stroke="#ffffff" stroke-width="2" marker-end="url(#arrowhead)" />
                    <path d="M600 130 L690 220" stroke="#ffffff" stroke-width="2" marker-end="url(#arrowhead)" />
                    
                    <!-- Relationship Lines -->
                    <path d="M300 160 L500 70" stroke="#ffffff" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="5,5" />
                    <text x="400" y="105" font-family="sans-serif" font-size="14" text-anchor="middle" fill="white">observers</text>
                    
                    <!-- Notification Flow -->
                    <path d="M300 250 C375 200, 425 200, 490 250" stroke="#f97316" stroke-width="2" marker-end="url(#arrowhead)" />
                    <path d="M300 250 C375 300, 425 300, 690 250" stroke="#f97316" stroke-width="2" marker-end="url(#arrowhead)" />
                    <text x="400" y="220" font-family="sans-serif" font-size="14" text-anchor="middle" fill="#f97316">notify</text>
                    
                    <!-- Arrowhead marker -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#ffffff" />
                        </marker>
                    </defs>
                </svg>
            </div>
            
            <h3>Participants</h3>
            <ul>
                <li><strong>Subject (Observable):</strong> Knows its observers and provides interfaces for attaching, detaching, and notifying observers.</li>
                <li><strong>ConcreteSubject:</strong> Stores state of interest to ConcreteObserver objects and sends notifications when its state changes.</li>
                <li><strong>Observer:</strong> Defines an updating interface for objects that should be notified of changes in a subject.</li>
                <li><strong>ConcreteObserver:</strong> Implements the Observer updating interface to keep its state consistent with the subject's.</li>
            </ul>
            
            <h3>When to Use</h3>
            <p>Use the Observer Pattern when:</p>
            <ul>
                <li>When an abstraction has two aspects, one dependent on the other.</li>
                <li>When a change to one object requires changing others, and you don't know how many objects need to be changed.</li>
                <li>When an object should be able to notify other objects without making assumptions about who these objects are.</li>
                <li>When you need to maintain consistency between related objects without making them tightly coupled.</li>
            </ul>
            
            <h3>Benefits</h3>
            <ul>
                <li><strong>Loose Coupling:</strong> Subjects and observers can interact without knowing much about each other.</li>
                <li><strong>Support for Broadcast Communication:</strong> Notifications are broadcast automatically to all interested objects.</li>
                <li><strong>Dynamic Relationships:</strong> Observers can be added and removed at runtime.</li>
                <li><strong>Open/Closed Principle:</strong> You can introduce new subscriber classes without changing the publisher's code.</li>
            </ul>
            
            <h3>Real-World Uses</h3>
            <ul>
                <li><strong>GUI Components:</strong> When UI elements need to update in response to data changes.</li>
                <li><strong>Event Handling Systems:</strong> In web browsers, DOM events use the Observer pattern.</li>
                <li><strong>Message Brokers:</strong> Publish-subscribe messaging patterns in distributed systems.</li>
                <li><strong>Data Binding:</strong> In MVC/MVVM frameworks to synchronize models and views.</li>
                <li><strong>Social Media:</strong> Notification systems where users subscribe to updates.</li>
            </ul>
        </section>

        <section class="content-section">
            <h2>Implementation Example</h2>
            <p>Here's a JavaScript implementation of the Observer pattern for a simple weather station:</p>
            
            <pre><code class="language-javascript">// Observer interface
class Observer {
    update(data) {
        throw new Error("Method 'update()' must be implemented");
    }
}

// Subject (Observable)
class Subject {
    constructor() {
        this.observers = [];
    }
    
    attach(observer) {
        if (observer instanceof Observer && !this.observers.includes(observer)) {
            this.observers.push(observer);
        }
    }
    
    detach(observer) {
        const index = this.observers.indexOf(observer);
        if (index !== -1) {
            this.observers.splice(index, 1);
        }
    }
    
    notify(data) {
        for (const observer of this.observers) {
            observer.update(data);
        }
    }
}

// Concrete Subject
class WeatherStation extends Subject {
    constructor() {
        super();
        this.temperature = 0;
        this.humidity = 0;
        this.pressure = 0;
    }

    setMeasurements(temperature, humidity, pressure) {
        this.temperature = temperature;
        this.humidity = humidity;
        this.pressure = pressure;

        // Notify all observers about the change
        this.notify({
            temperature: this.temperature,
            humidity: this.humidity,
            pressure: this.pressure
        });
    }
}

// Concrete Observer 1
class CurrentConditionsDisplay extends Observer {
    constructor() {
        super();
    }

    update(data) {
        const { temperature, humidity } = data;
        console.log(`Current conditions: ${temperature}°C and ${humidity}% humidity`);
    }
}

// Concrete Observer 2
class StatisticsDisplay extends Observer {
    constructor() {
        super();
        this.temperatures = [];
    }

    update(data) {
        const { temperature } = data;
        this.temperatures.push(temperature);
        
        const avg = this.temperatures.reduce((sum, t) => sum + t, 0) / this.temperatures.length;
        const max = Math.max(...this.temperatures);
        const min = Math.min(...this.temperatures);
        
        console.log(`Avg/Max/Min temperature = ${avg.toFixed(1)}/${max}/${min}`);
    }
}

// Concrete Observer 3
class ForecastDisplay extends Observer {
    constructor() {
        super();
        this.lastPressure = 0;
        this.currentPressure = 0;
    }

    update(data) {
        const { pressure } = data;
        this.lastPressure = this.currentPressure;
        this.currentPressure = pressure;
        
        let forecast = "";
        if (this.currentPressure > this.lastPressure) {
            forecast = "Improving weather on the way!";
        } else if (this.currentPressure === this.lastPressure) {
            forecast = "More of the same";
        } else {
            forecast = "Watch out for cooler, rainy weather";
        }
        
        console.log(`Forecast: ${forecast}`);
    }
}

// Using the pattern
const weatherStation = new WeatherStation();

const currentDisplay = new CurrentConditionsDisplay();
const statisticsDisplay = new StatisticsDisplay();
const forecastDisplay = new ForecastDisplay();

weatherStation.attach(currentDisplay);
weatherStation.attach(statisticsDisplay);
weatherStation.attach(forecastDisplay);

// Simulate weather changes
weatherStation.setMeasurements(22, 65, 1012);
weatherStation.setMeasurements(24, 70, 1010);
weatherStation.setMeasurements(20, 90, 1005);</code></pre>
            
            <p>In this example, the <code>WeatherStation</code> is our subject, and the various displays are the observers. When the weather data changes, all registered displays are automatically updated to show the new information. This demonstrates how the Observer pattern can be used to implement a loose coupling between related objects.</p>
        </section>

        <section class="content-section interactive-demo-section">
                <h2>Interactive Demo</h2>
            <p>Experience the Observer pattern in action with this interactive weather station demo. You can change the weather measurements and see how different displays update in response to the changes.</p>
            
            <div class="interactive-demo">
                <h3>Interactive Demo: Weather Station</h3>
                <p>Adjust the weather measurements and observe how the different displays update automatically.</p>
                
                <div id="observer-demo">
                    <!-- Weather Station Controls -->
                    <div class="weather-controls">
                        <h4>Weather Station (Subject)</h4>
                        <div class="control-group">
                            <label for="temperature">Temperature (°C):</label>
                            <input type="range" id="temperature" min="-10" max="40" value="22" step="1">
                            <span id="temperature-value">22</span>°C
                    </div>
                    
                        <div class="control-group">
                            <label for="humidity">Humidity (%):</label>
                            <input type="range" id="humidity" min="0" max="100" value="65" step="1">
                            <span id="humidity-value">65</span>%
                    </div>
                    
                        <div class="control-group">
                            <label for="pressure">Pressure (hPa):</label>
                            <input type="range" id="pressure" min="970" max="1030" value="1012" step="1">
                            <span id="pressure-value">1012</span> hPa
                    </div>
                    
                        <button id="update-weather">Update Weather</button>
                </div>
                
                    <!-- Observer Displays -->
                    <div class="observers">
                        <h4>Weather Displays (Observers)</h4>
                        
                        <div class="observer-display">
                            <div class="display-header">
                                <h5>Current Conditions Display</h5>
                                <label class="toggle">
                                    <input type="checkbox" id="toggle-current" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="display-content" id="current-display">
                                <!-- Content will be updated dynamically -->
                            </div>
                    </div>
                    
                        <div class="observer-display">
                            <div class="display-header">
                                <h5>Statistics Display</h5>
                                <label class="toggle">
                                    <input type="checkbox" id="toggle-stats" checked>
                                    <span class="slider"></span>
                                </label>
                    </div>
                            <div class="display-content" id="stats-display">
                                <!-- Content will be updated dynamically -->
                </div>
            </div>
                        
                        <div class="observer-display">
                            <div class="display-header">
                                <h5>Forecast Display</h5>
                                <label class="toggle">
                                    <input type="checkbox" id="toggle-forecast" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="display-content" id="forecast-display">
                                <!-- Content will be updated dynamically -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="output" id="observer-output">// Observer pattern events will be logged here</div>
    </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <p>&copy; 2025 Design Patterns Interactive Guide</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Observer interface
        class Observer {
                update(data) {
                    throw new Error("Method 'update()' must be implemented");
            }
        }

            // Subject (Observable)
        class Subject {
            constructor() {
                this.observers = [];
            }
            
            attach(observer) {
                    if (observer instanceof Observer && !this.observers.includes(observer)) {
                    this.observers.push(observer);
                        logEvent(`Attached observer: ${observer.constructor.name}`);
                }
            }
            
            detach(observer) {
                const index = this.observers.indexOf(observer);
                if (index !== -1) {
                    this.observers.splice(index, 1);
                        logEvent(`Detached observer: ${observer.constructor.name}`);
                }
            }
            
                notify(data) {
                    logEvent(`Subject is notifying ${this.observers.length} observers...`);
                for (const observer of this.observers) {
                        observer.update(data);
                }
            }
        }

            // Concrete Subject
            class WeatherStation extends Subject {
            constructor() {
                super();
                    this.temperature = 22;
                    this.humidity = 65;
                    this.pressure = 1012;
                }

                getTemperature() {
                    return this.temperature;
                }

                getHumidity() {
                    return this.humidity;
                }

                getPressure() {
                    return this.pressure;
                }

                setMeasurements(temperature, humidity, pressure) {
                    logEvent(`\nWeather Station measurements updated:
Temperature: ${temperature}°C
Humidity: ${humidity}%
Pressure: ${pressure} hPa`);
                    
                    this.temperature = temperature;
                    this.humidity = humidity;
                    this.pressure = pressure;

                    // Notify all observers about the change
                    this.notify({
                        temperature: this.temperature,
                        humidity: this.humidity,
                        pressure: this.pressure
                    });
                }
            }

            // Concrete Observer 1
            class CurrentConditionsDisplay extends Observer {
                constructor(element) {
                super();
                    this.element = element;
                    this.element.innerHTML = "Waiting for data...";
                }

                update(data) {
                    const { temperature, humidity } = data;
                    const message = `Current conditions: ${temperature}°C and ${humidity}% humidity`;
                    logEvent(`CurrentConditionsDisplay updated: ${message}`);
                    this.element.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div style="font-size: 2rem; color: var(--primary-color);">
                                ${temperature >= 25 ? '☀️' : temperature <= 10 ? '❄️' : '🌤️'}
                            </div>
                            <div>
                                <div style="font-size: 1.2rem; font-weight: 500;">${temperature}°C</div>
                                <div style="color: var(--text-muted);">${humidity}% humidity</div>
                            </div>
                        </div>
                    `;
                }
            }

            // Concrete Observer 2
            class StatisticsDisplay extends Observer {
                constructor(element) {
                    super();
                    this.element = element;
                    this.temperatures = [];
                    this.element.innerHTML = "Collecting data...";
                }

                update(data) {
                    const { temperature } = data;
                    this.temperatures.push(temperature);
                    
                    const avg = this.temperatures.reduce((sum, t) => sum + t, 0) / this.temperatures.length;
                    const max = Math.max(...this.temperatures);
                    const min = Math.min(...this.temperatures);
                    
                    const message = `Avg/Max/Min temperature = ${avg.toFixed(1)}°C/${max}°C/${min}°C`;
                    logEvent(`StatisticsDisplay updated: ${message}`);
                    
                    this.element.innerHTML = `
                        <div>
                            <div style="margin-bottom: 0.5rem;">
                                <span style="color: var(--text-muted);">Min:</span> 
                                <span style="font-weight: 500;">${min}°C</span>
                            </div>
                            <div style="margin-bottom: 0.5rem;">
                                <span style="color: var(--text-muted);">Avg:</span> 
                                <span style="font-weight: 500;">${avg.toFixed(1)}°C</span>
                            </div>
                            <div>
                                <span style="color: var(--text-muted);">Max:</span> 
                                <span style="font-weight: 500;">${max}°C</span>
                            </div>
                        </div>
                    `;
                }
            }

            // Concrete Observer 3
            class ForecastDisplay extends Observer {
                constructor(element) {
                    super();
                    this.element = element;
                    this.lastPressure = 1012;
                    this.currentPressure = 1012;
                    this.element.innerHTML = "Waiting for data...";
                }

                update(data) {
                    const { pressure } = data;
                    this.lastPressure = this.currentPressure;
                    this.currentPressure = pressure;
                    
                    let forecast = "";
                    let icon = "";
                    
                    if (this.currentPressure > this.lastPressure) {
                        forecast = "Improving weather on the way!";
                        icon = "☀️";
                    } else if (this.currentPressure === this.lastPressure) {
                        forecast = "More of the same";
                        icon = "🌤️";
                } else {
                        forecast = "Watch out for cooler, rainy weather";
                        icon = "🌧️";
                    }
                    
                    const message = `Forecast: ${forecast}`;
                    logEvent(`ForecastDisplay updated: ${message}`);
                    
                    this.element.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div style="font-size: 2rem;">${icon}</div>
                            <div>
                                <div style="font-weight: 500;">${forecast}</div>
                                <div style="color: var(--text-muted);">
                                    Pressure: ${this.currentPressure} hPa 
                                    ${this.currentPressure > this.lastPressure ? '↑' : this.currentPressure < this.lastPressure ? '↓' : '→'}
                                </div>
                            </div>
                        </div>
                    `;
                }
            }

            // DOM elements
            const currentDisplay = document.getElementById('current-display');
            const statsDisplay = document.getElementById('stats-display');
            const forecastDisplayElement = document.getElementById('forecast-display');
            const output = document.getElementById('observer-output');
            
            const temperatureInput = document.getElementById('temperature');
            const humidityInput = document.getElementById('humidity');
            const pressureInput = document.getElementById('pressure');
            
            const temperatureValue = document.getElementById('temperature-value');
            const humidityValue = document.getElementById('humidity-value');
            const pressureValue = document.getElementById('pressure-value');
            
            const updateButton = document.getElementById('update-weather');
            
            const toggleCurrent = document.getElementById('toggle-current');
            const toggleStats = document.getElementById('toggle-stats');
            const toggleForecast = document.getElementById('toggle-forecast');

            // Create the weather station and displays
            const weatherStation = new WeatherStation();
            const currentConditionsDisplay = new CurrentConditionsDisplay(currentDisplay);
            const statisticsDisplay = new StatisticsDisplay(statsDisplay);
            const forecastDisplay = new ForecastDisplay(forecastDisplayElement);

            // Initially attach all observers
            weatherStation.attach(currentConditionsDisplay);
            weatherStation.attach(statisticsDisplay);
            weatherStation.attach(forecastDisplay);

            // Update the UI when sliders change
            temperatureInput.addEventListener('input', function() {
                temperatureValue.textContent = this.value;
            });
            
            humidityInput.addEventListener('input', function() {
                humidityValue.textContent = this.value;
            });
            
            pressureInput.addEventListener('input', function() {
                pressureValue.textContent = this.value;
            });

            // Update weather when button is clicked
            updateButton.addEventListener('click', function() {
                const temperature = parseInt(temperatureInput.value);
                const humidity = parseInt(humidityInput.value);
                const pressure = parseInt(pressureInput.value);
                
                weatherStation.setMeasurements(temperature, humidity, pressure);
            });

            // Handle toggle switches for observers
            toggleCurrent.addEventListener('change', function() {
                if (this.checked) {
                    weatherStation.attach(currentConditionsDisplay);
                    
                    // Update with current data
                    currentConditionsDisplay.update({
                        temperature: weatherStation.getTemperature(),
                        humidity: weatherStation.getHumidity(),
                        pressure: weatherStation.getPressure()
                    });
                } else {
                    weatherStation.detach(currentConditionsDisplay);
                    currentDisplay.innerHTML = "<p style='color: var(--text-muted);'>Display disconnected</p>";
                }
            });
            
            toggleStats.addEventListener('change', function() {
                if (this.checked) {
                    weatherStation.attach(statisticsDisplay);
                    
                    // Update with current data
                    statisticsDisplay.update({
                        temperature: weatherStation.getTemperature(),
                        humidity: weatherStation.getHumidity(),
                        pressure: weatherStation.getPressure()
                    });
                } else {
                    weatherStation.detach(statisticsDisplay);
                    statsDisplay.innerHTML = "<p style='color: var(--text-muted);'>Display disconnected</p>";
                }
            });
            
            toggleForecast.addEventListener('change', function() {
                if (this.checked) {
                    weatherStation.attach(forecastDisplay);
                    
                    // Update with current data
                    forecastDisplay.update({
                        temperature: weatherStation.getTemperature(),
                        humidity: weatherStation.getHumidity(),
                        pressure: weatherStation.getPressure()
                    });
                } else {
                    weatherStation.detach(forecastDisplay);
                    forecastDisplay.innerHTML = "<p style='color: var(--text-muted);'>Display disconnected</p>";
                }
            });

            // Helper function to log events
            function logEvent(message) {
                const timestamp = new Date().toLocaleTimeString();
                output.innerHTML += `[${timestamp}] ${message}\n`;
                output.scrollTop = output.scrollHeight;
            }

            // Initial update
            logEvent("Weather Station initialized");
            weatherStation.setMeasurements(22, 65, 1012);
        });
    </script>
</body>
</html>
